apiVersion: v1
kind: Service
metadata:
  name: nextcloud-db # This service name becomes the internal hostname for Nextcloud to connect to (e.g., 'nextcloud-db:3306')
  namespace: nextcloud
  labels:
    app: nextcloud-db
spec:
  selector:
    app: nextcloud-db # Selects pods with the label 'app: nextcloud-db'
  ports:
    - protocol: TCP
      port: 3306 # Port that the service exposes
      targetPort: mariadb-port # Targets the named port on the MariaDB container
  clusterIP: None # Creates a headless service. Use 'None' for stateful applications to allow direct pod endpoint discovery, or omit for a standard ClusterIP.
